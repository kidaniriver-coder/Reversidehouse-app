# **民泊ゲスト対応チャットボット 要件定義書**

## **1\. プロジェクト概要**

### **1.1 目的**

民泊運営におけるゲストからの定型的な質問に24時間365日自動で応答するチャットボットを開発する。これにより、ホストの対応負荷を削減し、ゲスト満足度の向上と運営全体の効率化を目指す。

### **1.2 スコープ**

* **対話インターフェース**: Airbnb、LINE  
* **情報源**: 宿泊施設ごとに用意されたFAQドキュメント  
* **主要機能**: FAQに基づく自動応答、有人対応への切り替え、ホストによる回答の事前承認フロー

## **2\. 機能要件**

### **2.1 ゲストとの対話機能**

* **FAQベースの回答**: 宿泊施設の基本情報（住所、入室方法、Wi-Fiパスワード等）や、周辺情報（駐車場、レストラン、観光地等）に関する質問に自動応答する。  
* **意図解釈と聞き返し**: 質問の意図が曖昧な場合（例：「駐車場について」）、具体的な選択肢（例：「無料駐車場ですか？コインパーキングですか？」）を提示し、ユーザーの意図を明確にする。  
* **エスカレーション**: FAQで回答できない専門的な質問、クレーム、緊急性の高い要件については、自動応答を中断し、ホストへ即座に通知する。

### **2.2 外部プラットフォーム連携**

* **Airbnb連携**:  
  * Webhookを利用してゲストからのメッセージをリアルタイムに受信する。  
  * Airbnb APIを介して、ホストが承認した回答をゲストに送信する。  
* **LINE連携**:  
  * Messaging APIを利用して、ゲストとの双方向のメッセージ送受信を実現する。

### **2.3 回答品質管理機能**

* **回答精度の自動評価 (LLM as a Judge)**: 過去の「ゲストの質問」と「ホストが最終的に送信した正解の回答」のペアを教師データとして蓄積。新しい回答案が生成された際に、LLMがその回答案の適切さを自己評価し、継続的な精度向上を図る。  
* **会話ログの保存**: 全ての対話履歴を保存し、後から検索・閲覧可能にする。

### **2.4 ホスト向け管理機能**

* **手動承認フロー**: チャットボットが生成した回答案を、ホストが専用の管理画面で確認し、承認または編集してからゲストに送信するフローを設ける。  
* **ダッシュボード**: 質問の受信数、自動解決率、対応時間などの主要な指標を可視化する。  
* **有人チャット介入**: ホストが必要と判断した場合、いつでも自動応答に割り込み、直接ゲストと対話できる機能。

### **2.5 セキュリティ**

* **管理者ログイン**: ホスト用の管理画面に、IDとパスワードによる認証機能を実装する。  
* **個人情報保護**: ゲストの予約情報や個人情報を適切に管理し、外部APIキーなどの機密情報を安全に保管する。

## **3\. 技術仕様**

### **3.1 必須コンポーネント**

* **言語**: Python  
* **フレームワーク**: FastAPI (LINE連携API), Streamlit (ホスト用管理画面)  
* **主要ライブラリ**: langchain, openai (または他のLLMプロバイダー), python-dotenv  
* **外部サービス**: Airbnb API, LINE Messaging API

### **3.2 基本アーキテクチャ**

ゲストからのメッセージ (Webhook)  
↓  
FastAPIで受信  
↓  
LangChainでFAQドキュメントを検索  
↓  
LLMによる回答案の生成  
↓  
ホスト管理画面 (Streamlit) に表示  
↓  
ホストが承認/編集  
↓  
各プラットフォームのAPI経由でゲストに返信

## **4\. 開発スコープ（段階的リリース案）**

### **4.1 Step 1: MVP（最小限の製品）開発**

* **機能**: 基本的なFAQ応答、Airbnb連携、手動承認フロー  
* **ゴール**: 中核となる機能を実装し、実用性を検証する。

### **4.2 Step 2: 機能拡張**

* **機能**: LINE連携、LLM as a Judgeによる精度評価、聞き返し機能  
* **ゴール**: 対応チャネルを拡大し、対話の質を向上させる。

### **4.3 Step 3: 高度化**

* **機能**: 多言語対応、緊急通知の強化、他予約サイト（Booking.com等）との連携  
* **ゴール**: より広範なゲストに対応できる高機能なシステムを目指す。

## **5\. 検討・確認事項**

* **データ形式**: FAQ情報はどのような形式（スプレッドシート, テキストファイル等）で提供されるか？  
* **多言語対応**: 想定されるゲストの主な国籍や言語は何か？  
* **運用**: ホストが回答を承認するまでのSLA（サービスレベル合意）はどう設定するか？  
* **技術選定**: 使用するLLMモデル（GPT-4, Gemini等）は何を想定しているか？  
* **API準備**: Airbnb, LINEの各APIを利用するための開発者アカウントや申請は完了しているか